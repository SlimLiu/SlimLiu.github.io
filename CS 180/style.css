:root{
  --maxw: 1200px;
  --pad-x: clamp(16px, 4vw, 48px);
  --pad-y: clamp(56px, 10vh, 96px);
  --gap: clamp(16px, 3vw, 40px);
  --card-radius: 18px;
  --shadow: 0 6px 24px rgba(0,0,0,.08);
}

*{box-sizing:border-box}

html, body{
  margin:0; padding:0;
  scroll-behavior:smooth;
  background:#f4f4f9;
  color:#333;
  font-family:'Montserrat','Roboto',system-ui,-apple-system,Segoe UI,Arial,sans-serif;
  line-height:1.6;
  overflow-x:hidden;
}

/* 顶部锚点导航（可选） */
.top-nav{
  position:fixed; top:12px; left:50%; transform:translateX(-50%);
  display:flex; gap:16px; padding:8px 12px;
  background:rgba(255,255,255,.6); backdrop-filter:saturate(140%) blur(10px);
  border:1px solid rgba(0,0,0,.06); border-radius:999px; z-index:10;
}
.top-nav a{
  text-decoration:none; color:#222; font-weight:600; font-size:14px; padding:6px 10px; border-radius:999px;
}
.top-nav a:hover{ background:rgba(0,0,0,.05) }

/* 整屏区块 */
.project-section, .hero-section{
  min-height:100vh;
  display:flex; align-items:center;
  padding: var(--pad-y) var(--pad-x);
  position:relative;
}
.section-inner{
  width:100%; max-width:var(--maxw);
  margin:0 auto; display:flex; align-items:center; gap:var(--gap);
}

/* 英雄区 */
.hero-section{
  color:#fff;
  background:
    linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
    url('images/R.png') center/cover no-repeat;
}
.hero-section .hero-content{
  max-width: min(800px, 65%);
  animation: fadeIn 1.2s ease-out both;
}
h1{
  margin:0 0 .2em 0;
  font-weight:700;
  /* 大标题响应式 */
  font-size: clamp(32px, 6vw, 80px);
  line-height:1.08;
}
.hero-section p{
  font-size: clamp(16px, 2.2vw, 24px);
  opacity:.95;
}

/* 标题与正文 */
.project-section h2{
  margin:0 0 .5em 0;
  font-size: clamp(24px, 3.8vw, 48px);
  line-height:1.2;
}
.project-section p{ font-size: clamp(15px, 1.8vw, 20px) }

.text-content{
  flex:1 1 46%;
  max-width:46%;
}
.gallery-wrap{
  flex:1 1 54%;
  max-width:54%;
}

/* 左右交替节奏 */
.content-and-image .section-inner{ flex-direction:row }
.image-and-content .section-inner{ flex-direction:row-reverse }

/* 图片画廊（网格） */
.image-gallery{
  display:grid;
  grid-template-columns: repeat( auto-fill, minmax(220px,1fr) );
  gap:16px;
}
.image-card{
  border-radius: var(--card-radius);
  box-shadow: var(--shadow);
  background:#fff; overflow:hidden;
}
.image-card img, .image-card video{
  display:block; width:100%; height: auto; aspect-ratio: 16/10; object-fit: cover;
}
.image-card p{
  margin:10px 12px 12px; font-size:14px; color:#555;
}

/* 水平滚动廊（用于帧序列/动图） */
.horizontal-scroller{
  display:grid; grid-auto-flow:column; grid-auto-columns: clamp(220px, 38vw, 420px);
  overflow-x:auto; overscroll-behavior-x: contain; gap:16px; padding-bottom:6px;
  scroll-snap-type:x mandatory;
}
.horizontal-scroller .image-card{ scroll-snap-align:start }
.horizontal-scroller::-webkit-scrollbar{ height:8px }
.horizontal-scroller::-webkit-scrollbar-thumb{
  background:rgba(0,0,0,.2); border-radius:999px;
}

/* 向下箭头（button 语义 + 旋转修正） */
.scroll-down-arrow{
  position:absolute; bottom:5vh; left:50%; transform: translateX(-50%);
  width:56px; height:56px; border-radius:999px; border:none; cursor:pointer;
  background:rgba(255,255,255,.85);
  box-shadow: 0 6px 20px rgba(0,0,0,.12);
}
.scroll-down-arrow::after{
  content:'▲'; display:flex; align-items:center; justify-content:center;
  font-size:32px; color:#484444; width:100%; height:100%;
  transform: rotate(180deg);
}
@keyframes bounce{
  0%, 20%, 50%, 80%, 100% { transform: translate(-50%,0) }
  40% { transform: translate(-50%,-10px) }
  60% { transform: translate(-50%,-4px) }
}
.scroll-down-arrow{ animation: bounce 1.8s infinite }
.scroll-down-arrow:focus-visible{ outline: 3px solid #4c8bf5 }

/* 进入动效 */
@keyframes fadeIn{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)} }
.reveal{ opacity:0; transform:translateY(12px); transition: opacity .6s ease, transform .6s ease }
.reveal.is-visible{ opacity:1; transform:none }

/* 响应式（≤1024px） */
@media (max-width: 1024px){
  .section-inner{ flex-direction:column; text-align:center }
  .text-content, .gallery-wrap{ max-width:100% }
  .top-nav{ display:none } /* 如需保留可移除这一行 */
}

/* 尊重系统减少动画设置 */
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important; scroll-behavior:auto }
}






/* ===== PART 1 — FINAL CLEAN PATCH (scoped to #part1 only) ===== */

/* 本节建立独立层叠上下文 + 背景图（可自行替换或删掉 url 行） */
#part1{
  position: relative;
  isolation: isolate;
}
#part1::before{
  content:"";
  position:absolute; inset:0; z-index:0; pointer-events:none;
  background:
    /* 极轻的 0.08 覆层，仅统一基调，不会泛白变糊 */
    linear-gradient(rgba(184, 184, 184, 0.08), rgba(244,244,249,.08)),
    /* 用 image-set 适配视网膜，避免放大发糊 */
    image-set(url("images/p1-bg.jpg") 1x, url("images/p1-bg@2x.jpg") 2x)
    center/cover no-repeat;
  /* 轻微增强清晰度与对比 */
  filter: contrast(1.06) saturate(1.04);
  background-position: 50% 38%;
}


#part1 .p1-modern{ position: relative; z-index:1; }

/* 内边距收敛，确保整块稳落在一屏内 */
#part1.project-section{
  padding-top: clamp(40px, 8vh, 72px);
  padding-bottom: clamp(20px, 5vh, 44px);
}

/* 标题与导语（更精炼的字阶） */
#part1 .p1-header h2{
  margin:0 0 .2em 0;
  font-weight:800;
  font-size: clamp(26px, 3.6vw, 46px);
  line-height:1.08;
}
#part1 .p1-lead{
  margin:0;
  font-size: clamp(14px, 1.6vw, 17px);
  line-height:1.6;
  max-width: 60ch;
}

/* 五图条带：更紧凑的间距与高度；单行展示 */
#part1 .p1-row{
  --strip-h: clamp(148px, 30vh, 258px);
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap: clamp(2px, 0.5vw, 6px);
  height: var(--strip-h);
  padding-inline: clamp(2px, .6vw, 8px);
}

/* 图片项：去动画抖动，只保留极轻的进入动效 */
#part1 .p1-shot{
  position:relative;
  overflow:hidden;
  border-radius:0;
  opacity:0;
  transform: translateY(6px);
  animation: p1-in .35s ease-out forwards;
}
#part1 .p1-shot:nth-child(1){ animation-delay: 0s }
#part1 .p1-shot:nth-child(2){ animation-delay: .04s }
#part1 .p1-shot:nth-child(3){ animation-delay: .08s }
#part1 .p1-shot:nth-child(4){ animation-delay: .12s }
#part1 .p1-shot:nth-child(5){ animation-delay: .16s }

@keyframes p1-in{ to{ opacity:1; transform:none } }

#part1 .p1-shot img{
  width:100%; height:100%;
  object-fit:cover;   /* 保持长方形，不拉伸 */
  transition: transform .2s ease;
}
#part1 .p1-shot:hover img{ transform: scale(1.012) }

#part1 .p1-shot::after{
  content: attr(data-label);
  position:absolute; left:8px; bottom:8px;
  font-weight:700;
  font-size: clamp(10px, 1.1vw, 12px);
  color:#fff;
  mix-blend-mode:difference;   /* 纯平面自动反差，无底色 */
}

/* 结尾说明 */
#part1 .p1-notes{
  margin:0;
  font-size: clamp(13px, 1.4vw, 16px);
  line-height:1.55;
  max-width: 80ch;
  opacity:.95;
}

/* 小屏策略：中屏降低条带高度；小屏改两行 3+2 */
@media (max-width: 900px){
  #part1 .p1-row{ --strip-h: clamp(136px, 26vh, 220px); }
}
@media (max-width: 680px){
  #part1 .p1-row{ grid-template-columns: repeat(3, 1fr); height:auto; }
  #part1 .p1-shot{ aspect-ratio: 4 / 3; }
}

/* 确保底部箭头在背景图之上 */
#part1 .scroll-down-arrow{ position:absolute; z-index:2; }

/* ==== PART 1 – final, conflict-free, scoped to #part1 ==== */
#part1{ position:relative; isolation:isolate; }
#part1 .p1-modern{ display:grid; grid-template-rows:auto auto auto; gap:clamp(10px,2vh,18px); position:relative; z-index:1; }

/* 让本节稳落在一屏，避免把内容挤下去 */
#part1.project-section{ padding-top:clamp(40px,8vh,72px); padding-bottom:clamp(20px,5vh,44px); }

#part1 .p1-header h2{
  margin:0 0 .2em 0; font-weight:800;
  font-size:clamp(26px,3.6vw,46px); line-height:1.08;
}
#part1 .p1-lead{ margin:0; font-size:clamp(14px,1.6vw,17px); line-height:1.6; max-width:60ch; }

/* 五图一行（更紧凑） */
#part1 .p1-row{
  --strip-h:clamp(148px,30vh,258px);
  display:grid !important;
  grid-template-columns:repeat(5,minmax(0,1fr));
  gap:clamp(2px,0.5vw,6px);
  align-items:stretch;
  height:var(--strip-h);
  padding-inline:clamp(2px,.6vw,8px);
}
#part1 .p1-shot{ position:relative; overflow:hidden; border-radius:0; min-width:0; }
#part1 .p1-shot img{ width:100%; height:100%; object-fit:cover; }

/* 小焦距标签（纯平面） */
#part1 .p1-shot::after{
  content:attr(data-label);
  position:absolute; left:8px; bottom:8px;
  font-weight:700; font-size:clamp(10px,1.1vw,12px);
  color:#fff; mix-blend-mode:difference;
}

/* 解释区：左图（SVG） + 右文案 */
#part1 .p1-explain{
  display:grid; grid-template-columns:minmax(260px,1fr) minmax(280px,420px);
  align-items:center; gap:clamp(12px,2vw,28px);
}
#part1 .p1-graphic svg{ display:block; width:100%; height:auto; }
#part1 .p1-notes{ margin:0; font-size:clamp(13px,1.4vw,16px); line-height:1.55; max-width:60ch; }

/* 响应式：小屏改为两行图 3+2 */
@media (max-width: 900px){
  #part1 .p1-row{ --strip-h:clamp(136px,26vh,220px); }
  #part1 .p1-explain{ grid-template-columns:1fr; }
}
@media (max-width: 680px){
  #part1 .p1-row{ grid-template-columns:repeat(3,1fr); height:auto; }
  #part1 .p1-shot{ aspect-ratio:4/3; }
}






/* ============ Part 2: flat, single-plane, text wrapping around image ============ */

/* 让 Part 2 的内层容器从 flex 切换为 block，才能启用 float 排版与环绕 */
.wrap-section.section-inner{
  display:block;
  /* 容器宽度仍继承你的 max-width 变量/规则（若已定义） */
}
/* 清除浮动 */
.wrap-section.section-inner::after{ content:""; display:block; clear:both; }

/* 主图：靠左浮动，占据近半幅；用 shape-outside 让右侧文字环绕其外形 */
.wrap-media{
  margin: 0; /* 纯平面，不做阴影和边框 */
}
.wrap-media img{
  display:block; width:100%; height:auto; object-fit:cover;
}

/* 主图（左侧，较大） */
.wrap-media--primary{
  float:left;
  width: min(52%, 560px);
  margin: 0 3.5% 1.2rem 0;      /* 右侧留出间隔给文字 */
  /* 让文本沿多边形外轮廓环绕（可按你的照片边线微调） */
  shape-outside: polygon(0 0, 95% 0, 84% 20%, 88% 40%, 78% 60%, 90% 80%, 80% 100%, 0 100%);
  /* 让图像本身的边缘与 shape 对齐，保持单一“平面”的干净感 */
  clip-path: polygon(0 0, 95% 0, 84% 20%, 88% 40%, 78% 60%, 90% 80%, 80% 100%, 0 100%);
}

/* 次图（右侧小浮动，制造错落但仍是同一平面） */
.wrap-media--secondary{
  float:right;
  width: min(28%, 320px);
  margin: .4rem 0 1rem 2rem;    /* 与正文错落但不分卡片 */
  shape-outside: ellipse(60% 50% at 50% 50%);
  clip-path: ellipse(60% 50% at 50% 50%);
}

/* 文字容器：纯平面，无卡片/阴影；保持现代大字级 */
.wrap-text{
  /* 让大段文字自然环绕前面的浮动元素 */
  font-size: clamp(15px, 1.8vw, 20px);
}
.wrap-text h2{
  margin: 0 0 .5em 0;
  font-weight: 700;
  font-size: clamp(24px, 3.8vw, 48px);
  line-height: 1.15;
}
.wrap-text .subhead{
  font-weight: 700;
  opacity: .9;
}

/* 响应式：中小屏回到竖排，不用浮动与环绕（保持阅读性） */
@media (max-width: 1024px){
  .wrap-media--primary,
  .wrap-media--secondary{
    float:none; width:100%; margin: 0 0 12px 0;
    shape-outside:none; clip-path:none;
  }
  .wrap-section.section-inner::after{ content:none; }
}
